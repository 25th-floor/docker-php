# Beware: This file is generated by the generate.sh script!
FROM ubuntu:14.04
MAINTAINER Martin Prebio <mp@25th-floor.com>
EXPOSE 9000
ENV DEBIAN_FRONTEND noninteractive

RUN apt-get update \
	&& apt-get dist-upgrade -y \
	&& apt-get install -y software-properties-common language-pack-en-base git \
	&& LC_ALL=en_US.UTF-8 add-apt-repository ppa:ondrej/php5-oldstable \
	&& apt-get update \
	&& apt-get install -y php5-fpm php5-cli php5-sqlite php5-pgsql php5-mysqlnd php5-mcrypt php5-intl php5-gd php5-curl php5-xsl \
	&& apt-get clean \
	&& rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*

# Install composer
RUN php5 -r 'readfile("https://getcomposer.org/installer");' > composer-setup.php \
	&& php5 composer-setup.php --install-dir=/usr/local/bin --filename=composer \
	&& rm composer-setup.php

# Prepare run directory
RUN mkdir /run/php

WORKDIR /var/www

COPY php-fpm.conf /etc/php5/fpm/php-fpm.conf

CMD ["php5-fpm"]
